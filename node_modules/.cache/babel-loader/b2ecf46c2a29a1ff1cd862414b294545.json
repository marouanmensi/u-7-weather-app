{"ast":null,"code":"var _jsxFileName = \"/home/dev/chasacademy/weather-app/src/components/Weather.jsx\";\nimport React, { Component } from \"react\";\nimport config from \"../config.json\";\nimport Forecast from \"./Forecast\";\n\nclass Weather extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      temperature: \"\",\n      city: \"\",\n      cityId: \"\",\n      country: \"\",\n      humidity: \"\",\n      wind: \"\",\n      description: \"\",\n      sunrise: \"\",\n      sunset: \"\",\n      icon: \"\",\n      error: \"\"\n    };\n\n    this.getWeather = async () => {\n      try {\n        let fetchUrl = \"\";\n\n        if (!this.props.cityId) {\n          fetchUrl = `http://api.openweathermap.org/data/2.5/weather?id=2673730&appid=${config.API_KEY}`;\n          console.log(\"fetchUrl.using.stockholm:\", fetchUrl);\n        } else {\n          fetchUrl = `http://api.openweathermap.org/data/2.5/weather?id=${this.props.cityId}&appid=${config.API_KEY}`;\n          this.setState({\n            cityId: this.props.cityId\n          });\n          console.log(\"fetchUrl.from.props:\", fetchUrl);\n        }\n\n        const api = await fetch(fetchUrl);\n        const data = await api.json();\n\n        if (data) {\n          this.setState({\n            city: data.name,\n            country: data.sys.country,\n            temperature: Math.round(data.main.temp - 273.15),\n            humidity: data.main.humidity,\n            wind: data.wind.speed,\n            description: data.weather[0].description,\n            sunrise: data.sys.sunrise,\n            sunset: data.sys.sunset,\n            icon: data.weather[0].icon,\n            error: \"\"\n          });\n        }\n      } catch (e) {\n        console.log(\"Error in getWeather function of Weather component.\", e);\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.getWeather();\n  }\n\n  getDerivedStateFromProps() {\n    if (nextProps.cityId !== this.props.cityId) {\n      this.setState({\n        cityId: nextProps.cityId\n      });\n    }\n  }\n\n  render() {\n    const {\n      sunrise,\n      sunset,\n      description,\n      wind,\n      humidity,\n      temperature,\n      country,\n      city,\n      icon,\n      error\n    } = this.state;\n    const {\n      cityId\n    } = this.props;\n    const sunsriseClock = new Date(sunrise * 1000).toLocaleTimeString();\n    const sunsetClock = new Date(sunset * 1000).toLocaleTimeString();\n    const weatherCode = icon.slice(0, 2).toString();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        border: \"1px solid darkred\",\n        color: \"darkred\",\n        margin: \"20px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }\n    }, \"Weather Component\"), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }\n    }, city, \", \", country), /*#__PURE__*/React.createElement(\"img\", {\n      src: process.env.PUBLIC_URL + \"/img/\" + weatherCode + \".png\",\n      style: {\n        width: 100\n      },\n      placeholder: \"img\",\n      alt: \"img\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }\n    }, \"Temperature : \", temperature, \"\\xB0C / \", temperature * 9 / 5 + 32, \" \\xB0F\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }\n    }, \"Description : \", description), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }\n    }, \"Humidity : \", humidity, \" %\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }\n    }, \"Wind : \", wind, \" mph\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }\n    }, \"Sunrise : \", sunsriseClock), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }\n    }, \"Sunset : \", sunsetClock)), error && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 19\n      }\n    }, \"error :\", error), /*#__PURE__*/React.createElement(Forecast, {\n      cityId: cityId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default Weather;","map":{"version":3,"sources":["/home/dev/chasacademy/weather-app/src/components/Weather.jsx"],"names":["React","Component","config","Forecast","Weather","state","temperature","city","cityId","country","humidity","wind","description","sunrise","sunset","icon","error","getWeather","fetchUrl","props","API_KEY","console","log","setState","api","fetch","data","json","name","sys","Math","round","main","temp","speed","weather","e","componentDidMount","getDerivedStateFromProps","nextProps","render","sunsriseClock","Date","toLocaleTimeString","sunsetClock","weatherCode","slice","toString","border","color","margin","process","env","PUBLIC_URL","width"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport config from \"../config.json\";\nimport Forecast from \"./Forecast\";\n\nclass Weather extends Component {\n  state = {\n    temperature: \"\",\n    city: \"\",\n    cityId: \"\",\n    country: \"\",\n    humidity: \"\",\n    wind: \"\",\n    description: \"\",\n    sunrise: \"\",\n    sunset: \"\",\n    icon: \"\",\n    error: \"\",\n  };\n\n  componentDidMount() {\n    this.getWeather();\n  }\n  getDerivedStateFromProps() {\n    if (nextProps.cityId !== this.props.cityId) {\n      this.setState({\n        cityId: nextProps.cityId,\n      });\n    }\n  }\n\n  getWeather = async () => {\n    try {\n      let fetchUrl = \"\";\n      if (!this.props.cityId) {\n        fetchUrl = `http://api.openweathermap.org/data/2.5/weather?id=2673730&appid=${config.API_KEY}`;\n        console.log(\"fetchUrl.using.stockholm:\", fetchUrl);\n      } else {\n        fetchUrl = `http://api.openweathermap.org/data/2.5/weather?id=${this.props.cityId}&appid=${config.API_KEY}`;\n        this.setState({ cityId: this.props.cityId });\n        console.log(\"fetchUrl.from.props:\", fetchUrl);\n      }\n      const api = await fetch(fetchUrl);\n      const data = await api.json();\n      if (data) {\n        this.setState({\n          city: data.name,\n          country: data.sys.country,\n          temperature: Math.round(data.main.temp - 273.15),\n          humidity: data.main.humidity,\n          wind: data.wind.speed,\n          description: data.weather[0].description,\n          sunrise: data.sys.sunrise,\n          sunset: data.sys.sunset,\n          icon: data.weather[0].icon,\n          error: \"\",\n        });\n      }\n    } catch (e) {\n      console.log(\"Error in getWeather function of Weather component.\", e);\n    }\n  };\n\n  render() {\n    const {\n      sunrise,\n      sunset,\n      description,\n      wind,\n      humidity,\n      temperature,\n      country,\n      city,\n      icon,\n      error,\n    } = this.state;\n    const { cityId } = this.props;\n    const sunsriseClock = new Date(sunrise * 1000).toLocaleTimeString();\n    const sunsetClock = new Date(sunset * 1000).toLocaleTimeString();\n    const weatherCode = icon.slice(0, 2).toString();\n    return (\n      <div\n        style={{\n          border: \"1px solid darkred\",\n          color: \"darkred\",\n          margin: \"20px\",\n        }}\n      >\n        <h1>Weather Component</h1>\n        <h3>\n          {city}, {country}\n        </h3>\n\n        <img\n          src={process.env.PUBLIC_URL + \"/img/\" + weatherCode + \".png\"}\n          style={{ width: 100 }}\n          placeholder=\"img\"\n          alt=\"img\"\n        />\n        <ul>\n          <li>\n            Temperature : {temperature}°C / {(temperature * 9) / 5 + 32} °F\n          </li>\n          <li>Description : {description}</li>\n          <li>Humidity : {humidity} %</li>\n          <li>Wind : {wind} mph</li>\n          <li>Sunrise : {sunsriseClock}</li>\n          <li>Sunset : {sunsetClock}</li>\n        </ul>\n        {error && <p>error :{error}</p>}\n        <Forecast cityId={cityId} />\n      </div>\n    );\n  }\n}\n\nexport default Weather;\n"]},"metadata":{},"sourceType":"module"}