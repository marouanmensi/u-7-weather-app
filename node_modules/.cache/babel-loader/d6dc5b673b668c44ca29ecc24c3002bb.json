{"ast":null,"code":"var _jsxFileName = \"/home/enzo/dev/projects/chasacademy/current/style/src/components/Forecast.jsx\";\nimport React, { Component } from \"react\";\nimport config from \"../config.json\";\nimport WeatherDayCard from \"./WeatherDayCard\";\n\nclass Forecast extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      dailyData: [],\n      minMaxTemps: {}\n    };\n\n    this.componentDidMount = () => {\n      this.getForecast();\n    };\n\n    this.dailyValues = dailyData => {\n      let index = dailyData.findIndex(function (item, i) {\n        return item.dt_txt.endsWith(\"00:00:00\");\n      });\n      let nextDaysArray = [dailyData.slice(index, index + 8), dailyData.slice(index + 8, index + 16), dailyData.slice(index + 16, index + 24), dailyData.slice(index + 24, index + 32), dailyData.slice(index + 32)];\n      let dailyTemps = [];\n      let dailyDescriptions = [];\n      let dailyIcons = [];\n      nextDaysArray.forEach((element, index) => {\n        let dailyTemp = [];\n        let dailyDescription = [];\n        let dailyIcon = [];\n        element.forEach((element, index) => {\n          dailyTemp[index] = element[\"main\"][\"temp\"];\n          dailyDescription[index] = element[\"weather\"][0][\"description\"];\n          dailyIcon[index] = element[\"weather\"][0][\"icon\"].slice(0, 2);\n        });\n        dailyTemps[index] = dailyTemp;\n        dailyDescriptions[index] = dailyDescription;\n        dailyIcons[index] = dailyIcon;\n      });\n      let maxTemps = [];\n      let minTemps = [];\n      dailyTemps.forEach((element, index) => {\n        maxTemps[index] = Math.round(Math.max(...element) - 273.15);\n        minTemps[index] = Math.round(Math.min(...element) - 273.15);\n      });\n      let descriptions = [];\n      dailyDescriptions.forEach((element, index) => {\n        descriptions[index] = mode(element);\n      });\n      let icons = [];\n      dailyIcons.forEach((element, index) => {\n        icons[index] = mode(element);\n      });\n      console.log(\"descriptions\", descriptions);\n      console.log(\"icons\", icons);\n\n      function mode(arr) {\n        let numMapping = {};\n        let greatestFreq = 0;\n        let mode;\n        arr.forEach(function findMode(number) {\n          numMapping[number] = (numMapping[number] || 0) + 1;\n\n          if (greatestFreq < numMapping[number]) {\n            greatestFreq = numMapping[number];\n            mode = number;\n          }\n        });\n        return +mode;\n      }\n\n      return {\n        maxTemps,\n        minTemps\n      };\n    };\n\n    this.getForecast = () => {\n      if (this.props.cityId) {\n        // try {\n        //   const weatherURL = `http://api.openweathermap.org/data/2.5/forecast?id=${this.props.cityId}&appid=${config.API_KEY}`;\n        //   fetch(weatherURL)\n        //     .then((res) => res.json())\n        //     .then((data) => {\n        const data = require(`../assets/forecast.json`);\n\n        const minMaxTemps = this.dailyValues(data.list);\n        console.log(\"a\", minMaxTemps); // const dailyData = data[\"list\"];\n\n        const dailyData = data.list.filter(reading => reading.dt_txt.includes(\"00:00:00\"));\n        this.setState({\n          dailyData,\n          minMaxTemps\n        }, () => console.log(\"STATE\", this.state));\n        console.log(\"DAILYDATA\"); // });\n        // } catch (e) {\n        //   console.log(\"Error in API request of Forecast component.\", e);\n        // }\n      }\n    };\n\n    this.weatherDaysCardsRender = (celsius, minMaxTemps) => {\n      return this.state.dailyData.map((reading, index) => /*#__PURE__*/React.createElement(WeatherDayCard, {\n        reading: reading,\n        key: index,\n        city: this.state.city,\n        celsius: celsius,\n        minTemp: minMaxTemps[\"minTemps\"][index],\n        maxTemp: minMaxTemps[\"maxTemps\"][index],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 7\n        }\n      }));\n    };\n  }\n\n  render() {\n    const {\n      minMaxTemps\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: this.props.forecastClass,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"go-back-arrow\",\n      onClick: this.props.onClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: process.env.PUBLIC_URL + \"/img/back-arrow.png\",\n      placeholder: \"img\",\n      alt: \"img\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      key: this.state.temperature,\n      className: \"cards-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }\n    }, this.weatherDaysCardsRender(this.props.celsius, minMaxTemps)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"intervals-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }\n    }, \"3-hour intervals\")));\n  }\n\n}\n\nexport default Forecast;","map":{"version":3,"sources":["/home/enzo/dev/projects/chasacademy/current/style/src/components/Forecast.jsx"],"names":["React","Component","config","WeatherDayCard","Forecast","state","dailyData","minMaxTemps","componentDidMount","getForecast","dailyValues","index","findIndex","item","i","dt_txt","endsWith","nextDaysArray","slice","dailyTemps","dailyDescriptions","dailyIcons","forEach","element","dailyTemp","dailyDescription","dailyIcon","maxTemps","minTemps","Math","round","max","min","descriptions","mode","icons","console","log","arr","numMapping","greatestFreq","findMode","number","props","cityId","data","require","list","filter","reading","includes","setState","weatherDaysCardsRender","celsius","map","city","render","forecastClass","onClick","process","env","PUBLIC_URL","temperature"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport config from \"../config.json\";\nimport WeatherDayCard from \"./WeatherDayCard\";\n\nclass Forecast extends Component {\n  state = {\n    dailyData: [],\n    minMaxTemps: {},\n  };\n\n  componentDidMount = () => {\n    this.getForecast();\n  };\n\n  dailyValues = (dailyData) => {\n    let index = dailyData.findIndex(function (item, i) {\n      return item.dt_txt.endsWith(\"00:00:00\");\n    });\n    let nextDaysArray = [\n      dailyData.slice(index, index + 8),\n      dailyData.slice(index + 8, index + 16),\n      dailyData.slice(index + 16, index + 24),\n      dailyData.slice(index + 24, index + 32),\n      dailyData.slice(index + 32),\n    ];\n    let dailyTemps = [];\n    let dailyDescriptions = [];\n    let dailyIcons = [];\n    nextDaysArray.forEach((element, index) => {\n      let dailyTemp = [];\n      let dailyDescription = [];\n      let dailyIcon = [];\n      element.forEach((element, index) => {\n        dailyTemp[index] = element[\"main\"][\"temp\"];\n        dailyDescription[index] = element[\"weather\"][0][\"description\"];\n        dailyIcon[index] = element[\"weather\"][0][\"icon\"].slice(0, 2);\n      });\n      dailyTemps[index] = dailyTemp;\n      dailyDescriptions[index] = dailyDescription;\n      dailyIcons[index] = dailyIcon;\n    });\n\n    let maxTemps = [];\n    let minTemps = [];\n\n    dailyTemps.forEach((element, index) => {\n      maxTemps[index] = Math.round(Math.max(...element) - 273.15);\n      minTemps[index] = Math.round(Math.min(...element) - 273.15);\n    });\n    let descriptions = [];\n    dailyDescriptions.forEach((element, index) => {\n      descriptions[index] = mode(element);\n    });\n    let icons = [];\n    dailyIcons.forEach((element, index) => {\n      icons[index] = mode(element);\n    });\n    console.log(\"descriptions\", descriptions);\n    console.log(\"icons\", icons);\n\n    function mode(arr) {\n      let numMapping = {};\n      let greatestFreq = 0;\n      let mode;\n      arr.forEach(function findMode(number) {\n        numMapping[number] = (numMapping[number] || 0) + 1;\n\n        if (greatestFreq < numMapping[number]) {\n          greatestFreq = numMapping[number];\n          mode = number;\n        }\n      });\n      return +mode;\n    }\n    return { maxTemps, minTemps };\n  };\n\n  getForecast = () => {\n    if (this.props.cityId) {\n      // try {\n      //   const weatherURL = `http://api.openweathermap.org/data/2.5/forecast?id=${this.props.cityId}&appid=${config.API_KEY}`;\n\n      //   fetch(weatherURL)\n      //     .then((res) => res.json())\n      //     .then((data) => {\n      const data = require(`../assets/forecast.json`);\n\n      const minMaxTemps = this.dailyValues(data.list);\n      console.log(\"a\", minMaxTemps);\n\n      // const dailyData = data[\"list\"];\n\n      const dailyData = data.list.filter((reading) =>\n        reading.dt_txt.includes(\"00:00:00\")\n      );\n      this.setState(\n        {\n          dailyData,\n          minMaxTemps,\n        },\n        () => console.log(\"STATE\", this.state)\n      );\n      console.log(\"DAILYDATA\");\n      // });\n      // } catch (e) {\n      //   console.log(\"Error in API request of Forecast component.\", e);\n      // }\n    }\n  };\n\n  weatherDaysCardsRender = (celsius, minMaxTemps) => {\n    return this.state.dailyData.map((reading, index) => (\n      <WeatherDayCard\n        reading={reading}\n        key={index}\n        city={this.state.city}\n        celsius={celsius}\n        minTemp={minMaxTemps[\"minTemps\"][index]}\n        maxTemp={minMaxTemps[\"maxTemps\"][index]}\n      />\n    ));\n  };\n\n  render() {\n    const { minMaxTemps } = this.state;\n    return (\n      <div className={this.props.forecastClass}>\n        <div id=\"go-back-arrow\" onClick={this.props.onClick}>\n          <img\n            src={process.env.PUBLIC_URL + \"/img/back-arrow.png\"}\n            placeholder=\"img\"\n            alt=\"img\"\n          />\n        </div>\n        <div key={this.state.temperature} className=\"cards-container\">\n          {this.weatherDaysCardsRender(this.props.celsius, minMaxTemps)}\n        </div>\n        <div className=\"intervals-button\">\n          <div>3-hour intervals</div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Forecast;\n"]},"metadata":{},"sourceType":"module"}